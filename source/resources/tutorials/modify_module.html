

<!DOCTYPE html>


<html lang="fr" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Modifier un module existant &#8212; Documentation des projets de Naova</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="/home/runner/.local/lib/python3.12/site-packages/sphinxcontrib/icon/node_modules/@fortawesome/fontawesome-free/css/all.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.4cbf315f70debaebd550c87a6162cf0f.min.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="/home/runner/.local/lib/python3.12/site-packages/sphinxcontrib/icon/node_modules/@fortawesome/fontawesome-free/js/all.min.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../../../_static/translations.js"></script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'source/resources/tutorials/modify_module';</script>
    <link rel="icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Recherche" href="../../../search.html" />
    <link rel="next" title="Tester sur le robot" href="test.html" />
    <link rel="prev" title="Ajouter la représentation au fichier de configuration" href="config.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="fr"/>
  <meta name="docsearch:version" content="" />
    <meta name="docbuild:last-update" content="mars 22, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Passer au contenu principal</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Haut de page</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Alerte de version"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/naova_exp.png" class="logo__image only-light" alt=""/>
    <img src="../../../_static/naova_exp_dark.png" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">Documentation des projets de Naova</p>
  
</a></div>
        <div class="sidebar-primary-item"><ul class="navbar-icon-links"
    aria-label="Quick Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/Naova/Naova.github.io" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Configuration</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../configuration/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration/simulation.html">Déployer en Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration/irl.html">Déployer sur un Robot Réel</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Vue d'ensemble</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../overview/core_concepts.html">Concepts de base</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Ressources</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Tutoriels</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="module.html">Créer un nouveau module</a></li>
<li class="toctree-l2"><a class="reference internal" href="representation.html">Créer une nouvelle représentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">Ajouter la représentation au fichier de configuration</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Modifier un module existant</a></li>
<li class="toctree-l2"><a class="reference internal" href="test.html">Tester sur le robot</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../how-to/index.html">Comment faire</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../how-to/naova_release.html">Déploiement du code sur le dépôt NaovaRelease</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/v5_deployment.html">Préparation d’un Nao v5 pour les démonstrations</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Projets</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../projects/behavior/index.html">Comportement</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../projects/communication/index.html">Communication</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../projects/motion-control/index.html">Contrôle de mouvement</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../projects/motion-control/walk_controller.html">Contrôleur de marche</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../projects/perception/index.html">Perception</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../projects/perception/ball_detector.html">Détecteur de balle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/perception/line_detector.html">Détecteur de ligne</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../projects/challenges/index.html">Challenges</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Références</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../refs/additional_resources.html">Ressources additionnelles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../refs/contributing.html">Comment contribuer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../refs/bibliography.html">Bibliographie</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Liens vers les projets</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://github.com/Naova/NaovaRelease">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://clubnaova.ca/">Naova</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.etsmtl.ca/">ETS</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Naova/Naova.github.io" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Dépôt source"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Naova/Naova.github.io/edit/main/source/resources/tutorials/modify_module.rst" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Naova/Naova.github.io/issues/new?title=Issue%20on%20page%20%2Fsource/resources/tutorials/modify_module.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Ouvrez un problème"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Téléchargez cette page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/source/resources/tutorials/modify_module.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Télécharger le fichier source"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Imprimer au format PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Mode plein écran"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Thème" data-bs-title="Thème"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Clair"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Sombre"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="Paramètres système"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Recherche" aria-label="Recherche" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Modifier un module existant</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contenu </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#le-code">Le code</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#explications">Explications</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="modifier-un-module-existant">
<span id="modify-module"></span><h1>Modifier un module existant<a class="headerlink" href="#modifier-un-module-existant" title="Lien permanent vers cette rubrique">#</a></h1>
<p>Dans ce tutoriel, nous allons voir comment modifier un module existant en prenant toujours pour exemple la détection d’un objet rouge via la caméra.</p>
<section id="le-code">
<h2>Le code<a class="headerlink" href="#le-code" title="Lien permanent vers cette rubrique">#</a></h2>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-code" viewBox="0 0 16 16" aria-hidden="true"><path d="m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215Zm-6.56 0a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z"></path></svg></span><span class="sd-summary-text">Code pour <em>LEDHandler.h</em></span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cm">/**</span>
<span class="linenos"> 2</span><span class="cm">* @file LEDHandler.h</span>
<span class="linenos"> 3</span><span class="cm">* This file implements a module that generates the LEDRequest from certain representations.</span>
<span class="linenos"> 4</span><span class="cm">* @author jeff</span>
<span class="linenos"> 5</span><span class="cm">*/</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="cp">#pragma once</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Representations/BehaviorControl/TeamBehaviorStatus.h&quot;</span>
<span class="linenos">10</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Representations/Communication/GameInfo.h&quot;</span>
<span class="linenos">11</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Representations/Communication/RobotInfo.h&quot;</span>
<span class="linenos">12</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Representations/Communication/TeamData.h&quot;</span>
<span class="linenos">13</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Representations/Communication/TeamInfo.h&quot;</span>
<span class="linenos">14</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Representations/Infrastructure/FrameInfo.h&quot;</span>
<span class="linenos">15</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Representations/Infrastructure/LEDRequest.h&quot;</span>
<span class="linenos">16</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Representations/Infrastructure/SensorData/SystemSensorData.h&quot;</span>
<span class="linenos">17</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Representations/Modeling/BallModel.h&quot;</span>
<span class="linenos">18</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Representations/Perception/FieldFeatures/FieldFeatureOverview.h&quot;</span>
<span class="linenos">19</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Representations/Sensing/GroundContactState.h&quot;</span>
<span class="linenos">20</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Tools/Module/Module.h&quot;</span>
<span class="linenos">21</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Representations/Infrastructure/RobotHealth.h&quot;</span>
<span class="hll"><span class="linenos">22</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Representations/Perception/ColorDetects/ColorDetect.h&quot;</span>
</span><span class="linenos">23</span>
<span class="linenos">24</span><span class="n">MODULE</span><span class="p">(</span><span class="n">LEDHandler</span><span class="p">,</span>
<span class="linenos">25</span><span class="p">{,</span>
<span class="linenos">26</span><span class="w">   </span><span class="n">REQUIRES</span><span class="p">(</span><span class="n">BallModel</span><span class="p">),</span>
<span class="linenos">27</span><span class="w">   </span><span class="n">REQUIRES</span><span class="p">(</span><span class="n">FieldFeatureOverview</span><span class="p">),</span>
<span class="linenos">28</span><span class="w">   </span><span class="n">REQUIRES</span><span class="p">(</span><span class="n">FrameInfo</span><span class="p">),</span>
<span class="linenos">29</span><span class="w">   </span><span class="n">REQUIRES</span><span class="p">(</span><span class="n">GameInfo</span><span class="p">),</span>
<span class="linenos">30</span><span class="w">   </span><span class="n">REQUIRES</span><span class="p">(</span><span class="n">GroundContactState</span><span class="p">),</span>
<span class="linenos">31</span><span class="w">   </span><span class="n">REQUIRES</span><span class="p">(</span><span class="n">JointSensorData</span><span class="p">),</span>
<span class="linenos">32</span><span class="w">   </span><span class="n">REQUIRES</span><span class="p">(</span><span class="n">OwnTeamInfo</span><span class="p">),</span>
<span class="linenos">33</span><span class="w">   </span><span class="n">REQUIRES</span><span class="p">(</span><span class="n">RobotInfo</span><span class="p">),</span>
<span class="linenos">34</span><span class="w">   </span><span class="n">USES</span><span class="p">(</span><span class="n">RobotHealth</span><span class="p">),</span>
<span class="linenos">35</span><span class="w">   </span><span class="n">REQUIRES</span><span class="p">(</span><span class="n">SystemSensorData</span><span class="p">),</span>
<span class="linenos">36</span><span class="w">   </span><span class="n">REQUIRES</span><span class="p">(</span><span class="n">TeamBehaviorStatus</span><span class="p">),</span>
<span class="linenos">37</span><span class="w">   </span><span class="n">REQUIRES</span><span class="p">(</span><span class="n">TeamData</span><span class="p">),</span>
<span class="hll"><span class="linenos">38</span><span class="w">   </span><span class="n">REQUIRES</span><span class="p">(</span><span class="n">ColorDetect</span><span class="p">),</span>
</span><span class="linenos">39</span><span class="w">   </span><span class="n">PROVIDES</span><span class="p">(</span><span class="n">LEDRequest</span><span class="p">),</span>
<span class="linenos">40</span><span class="w">   </span><span class="n">DEFINES_PARAMETERS</span><span class="p">(</span>
<span class="linenos">41</span><span class="w">   </span><span class="p">{,</span>
<span class="linenos">42</span><span class="w">      </span><span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="n">chargingLightSlowness</span><span class="p">,</span>
<span class="linenos">43</span><span class="w">      </span><span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="mi">2000</span><span class="p">)</span><span class="w"> </span><span class="n">gameControllerTimeOut</span><span class="p">,</span>
<span class="linenos">44</span><span class="w">      </span><span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="n">tempForHalfLEDActive</span><span class="p">,</span>
<span class="linenos">45</span><span class="w">      </span><span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="mi">65</span><span class="p">)</span><span class="w"> </span><span class="n">tempForLEDBlinking</span><span class="p">,</span>
<span class="linenos">46</span><span class="w">      </span><span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="mi">75</span><span class="p">)</span><span class="w"> </span><span class="n">tempForLEDFastBlinking</span><span class="p">,</span>
<span class="linenos">47</span><span class="w">   </span><span class="p">}),</span>
<span class="linenos">48</span><span class="p">});</span>
<span class="linenos">49</span>
<span class="linenos">50</span><span class="k">class</span><span class="w"> </span><span class="nc">LEDHandler</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">LEDHandlerBase</span>
<span class="linenos">51</span><span class="p">{</span>
<span class="linenos">52</span><span class="k">public</span><span class="o">:</span>
<span class="linenos">53</span><span class="w">   </span><span class="n">ENUM</span><span class="p">(</span><span class="n">EyeColor</span><span class="p">,</span>
<span class="linenos">54</span><span class="w">   </span><span class="p">{,</span>
<span class="linenos">55</span><span class="w">      </span><span class="n">red</span><span class="p">,</span>
<span class="linenos">56</span><span class="w">      </span><span class="n">green</span><span class="p">,</span>
<span class="linenos">57</span><span class="w">      </span><span class="n">blue</span><span class="p">,</span>
<span class="linenos">58</span><span class="w">      </span><span class="n">white</span><span class="p">,</span>
<span class="linenos">59</span><span class="w">      </span><span class="n">magenta</span><span class="p">,</span>
<span class="linenos">60</span><span class="w">      </span><span class="n">yellow</span><span class="p">,</span>
<span class="linenos">61</span><span class="w">      </span><span class="n">cyan</span><span class="p">,</span>
<span class="linenos">62</span><span class="w">   </span><span class="p">});</span>
<span class="linenos">63</span>
<span class="linenos">64</span><span class="k">private</span><span class="o">:</span>
<span class="linenos">65</span><span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="n">update</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="p">;</span>
<span class="linenos">66</span>
<span class="linenos">67</span><span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="nf">setEyeColor</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">,</span>
<span class="linenos">68</span><span class="w">                    </span><span class="kt">bool</span><span class="w"> </span><span class="n">left</span><span class="p">,</span>
<span class="linenos">69</span><span class="w">                    </span><span class="n">EyeColor</span><span class="w"> </span><span class="n">col</span><span class="p">,</span>
<span class="linenos">70</span><span class="w">                    </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">LEDState</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
<span class="linenos">71</span>
<span class="linenos">72</span><span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="nf">setBatteryLevelInEar</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">LED</span><span class="w"> </span><span class="n">baseLED</span><span class="p">);</span>
<span class="linenos">73</span>
<span class="linenos">74</span><span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="nf">setRightEar</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos">75</span><span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="nf">setLeftEar</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos">76</span><span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="nf">setLeftEye</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos">77</span><span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="nf">setRightEye</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos">78</span><span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="nf">setHead</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos">79</span><span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="nf">setChestButton</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos">80</span><span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="nf">setLeftFoot</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos">81</span><span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="nf">setRightFoot</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos">82</span>
<span class="linenos">83</span><span class="w">   </span><span class="kt">size_t</span><span class="w"> </span><span class="n">chargingLED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="linenos">84</span><span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">LED</span><span class="w"> </span><span class="n">headLEDCircle</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">numOfHeadLEDs</span><span class="p">]</span><span class="w"> </span><span class="o">=</span>
<span class="linenos">85</span><span class="w">   </span><span class="p">{</span>
<span class="linenos">86</span><span class="w">      </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">headRearLeft2</span><span class="p">,</span>
<span class="linenos">87</span><span class="w">      </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">headRearLeft1</span><span class="p">,</span>
<span class="linenos">88</span><span class="w">      </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">headRearLeft0</span><span class="p">,</span>
<span class="linenos">89</span><span class="w">      </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">headMiddleLeft0</span><span class="p">,</span>
<span class="linenos">90</span><span class="w">      </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">headFrontLeft0</span><span class="p">,</span>
<span class="linenos">91</span><span class="w">      </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">headFrontLeft1</span><span class="p">,</span>
<span class="linenos">92</span><span class="w">      </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">headFrontRight1</span><span class="p">,</span>
<span class="linenos">93</span><span class="w">      </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">headFrontRight0</span><span class="p">,</span>
<span class="linenos">94</span><span class="w">      </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">headMiddleRight0</span><span class="p">,</span>
<span class="linenos">95</span><span class="w">      </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">headRearRight0</span><span class="p">,</span>
<span class="linenos">96</span><span class="w">      </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">headRearRight1</span><span class="p">,</span>
<span class="linenos">97</span><span class="w">      </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">headRearRight2</span>
<span class="linenos">98</span><span class="w">   </span><span class="p">};</span>
<span class="linenos">99</span><span class="p">};</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-code" viewBox="0 0 16 16" aria-hidden="true"><path d="m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215Zm-6.56 0a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z"></path></svg></span><span class="sd-summary-text">Code pour <em>LEDHandler.cpp</em></span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="cm">/**</span>
<span class="linenos">  2</span><span class="cm">* @file LEDHandler.cpp</span>
<span class="linenos">  3</span><span class="cm">* This file implements a module that generates the LEDRequest from certain representations.</span>
<span class="linenos">  4</span><span class="cm">* @author jeff</span>
<span class="linenos">  5</span><span class="cm">* @author &lt;a href=&quot;mailto:jesse@tzi.de&quot;&gt;Jesse Richter-Klug&lt;/a&gt;</span>
<span class="linenos">  6</span><span class="cm">*/</span>
<span class="linenos">  7</span>
<span class="linenos">  8</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;LEDHandler.h&quot;</span>
<span class="linenos">  9</span>
<span class="linenos"> 10</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;algorithm&gt;</span>
<span class="linenos"> 11</span>
<span class="linenos"> 12</span><span class="kt">void</span><span class="w"> </span><span class="nf">LEDHandler::update</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">)</span>
<span class="linenos"> 13</span><span class="p">{</span>
<span class="linenos"> 14</span><span class="w">   </span><span class="c1">//reset</span>
<span class="linenos"> 15</span><span class="w">   </span><span class="n">FOREACH_ENUM</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">LED</span><span class="p">,</span><span class="w"> </span><span class="n">led</span><span class="p">)</span>
<span class="linenos"> 16</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">led</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">off</span><span class="p">;</span>
<span class="linenos"> 17</span>
<span class="linenos"> 18</span><span class="w">   </span><span class="n">setRightEye</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos"> 19</span><span class="w">   </span><span class="n">setLeftEye</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos"> 20</span><span class="w">   </span><span class="n">setChestButton</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos"> 21</span><span class="w">   </span><span class="n">setLeftFoot</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos"> 22</span><span class="w">   </span><span class="n">setRightFoot</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos"> 23</span>
<span class="linenos"> 24</span><span class="w">   </span><span class="c1">//update</span>
<span class="linenos"> 25</span><span class="w">   </span><span class="n">setRightEar</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos"> 26</span><span class="w">   </span><span class="n">setLeftEar</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos"> 27</span><span class="w">   </span><span class="n">setHead</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">);</span>
<span class="linenos"> 28</span><span class="p">}</span>
<span class="linenos"> 29</span>
<span class="linenos"> 30</span><span class="kt">void</span><span class="w"> </span><span class="nf">LEDHandler::setRightEar</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">)</span>
<span class="linenos"> 31</span><span class="p">{</span>
<span class="linenos"> 32</span><span class="w">   </span><span class="c1">//right ear -&gt; battery</span>
<span class="linenos"> 33</span><span class="w">   </span><span class="n">setBatteryLevelInEar</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">earsRight0Deg</span><span class="p">);</span>
<span class="linenos"> 34</span><span class="p">}</span>
<span class="linenos"> 35</span>
<span class="linenos"> 36</span><span class="kt">void</span><span class="w"> </span><span class="nf">LEDHandler::setLeftEar</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">)</span>
<span class="linenos"> 37</span><span class="p">{</span>
<span class="linenos"> 38</span><span class="w">   </span><span class="c1">//left ear -&gt; connected players</span>
<span class="linenos"> 39</span><span class="w">   </span><span class="c1">//          + GameController connection lost -&gt; freaky blinking</span>
<span class="linenos"> 40</span><span class="w">   </span><span class="k">if</span><span class="p">(</span><span class="n">theFrameInfo</span><span class="p">.</span><span class="n">getTimeSince</span><span class="p">(</span><span class="n">theGameInfo</span><span class="p">.</span><span class="n">timeLastPacketReceived</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">gameControllerTimeOut</span><span class="p">)</span>
<span class="linenos"> 41</span><span class="w">   </span><span class="p">{</span>
<span class="linenos"> 42</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">earsLeft324Deg</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">blinking</span><span class="p">;</span>
<span class="linenos"> 43</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">earsLeft144Deg</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">blinking</span><span class="p">;</span>
<span class="linenos"> 44</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 45</span>
<span class="linenos"> 46</span><span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">numberOfConnectedTeammates</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">theTeamData</span><span class="p">.</span><span class="n">teammates</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>
<span class="linenos"> 47</span><span class="w">   </span><span class="k">if</span><span class="p">(</span><span class="n">numberOfConnectedTeammates</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="linenos"> 48</span><span class="w">   </span><span class="p">{</span>
<span class="linenos"> 49</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">earsLeft0Deg</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos"> 50</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">earsLeft36Deg</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos"> 51</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 52</span><span class="w">   </span><span class="k">if</span><span class="p">(</span><span class="n">numberOfConnectedTeammates</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 53</span><span class="w">   </span><span class="p">{</span>
<span class="linenos"> 54</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">earsLeft72Deg</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos"> 55</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">earsLeft108Deg</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos"> 56</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 57</span><span class="w">   </span><span class="k">if</span><span class="p">(</span><span class="n">numberOfConnectedTeammates</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="linenos"> 58</span><span class="w">   </span><span class="p">{</span>
<span class="linenos"> 59</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">earsLeft180Deg</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos"> 60</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">earsLeft216Deg</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos"> 61</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 62</span><span class="w">   </span><span class="k">if</span><span class="p">(</span><span class="n">numberOfConnectedTeammates</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="linenos"> 63</span><span class="w">   </span><span class="p">{</span>
<span class="linenos"> 64</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">earsLeft252Deg</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos"> 65</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">earsLeft288Deg</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos"> 66</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 67</span><span class="p">}</span>
<span class="linenos"> 68</span>
<span class="linenos"> 69</span><span class="kt">void</span><span class="w"> </span><span class="nf">LEDHandler::setEyeColor</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">,</span>
<span class="linenos"> 70</span><span class="w">                             </span><span class="kt">bool</span><span class="w"> </span><span class="n">left</span><span class="p">,</span>
<span class="linenos"> 71</span><span class="w">                             </span><span class="n">EyeColor</span><span class="w"> </span><span class="n">col</span><span class="p">,</span>
<span class="linenos"> 72</span><span class="w">                             </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">LEDState</span><span class="w"> </span><span class="n">s</span><span class="p">)</span>
<span class="linenos"> 73</span><span class="p">{</span>
<span class="linenos"> 74</span><span class="w">   </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">LED</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">faceLeftRed0Deg</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">faceRightRed0Deg</span><span class="p">;</span>
<span class="linenos"> 75</span>
<span class="linenos"> 76</span><span class="w">   </span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">redOffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="linenos"> 77</span><span class="w">                    </span><span class="n">greenOffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">faceLeftGreen0Deg</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">faceLeftRed0Deg</span><span class="p">,</span>
<span class="linenos"> 78</span><span class="w">                    </span><span class="n">blueOffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">faceLeftBlue0Deg</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">faceLeftRed0Deg</span><span class="p">,</span>
<span class="linenos"> 79</span><span class="w">                    </span><span class="n">numOfLEDsPerColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">faceLeftRed315Deg</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">faceLeftRed0Deg</span><span class="p">;</span>
<span class="linenos"> 80</span>
<span class="linenos"> 81</span><span class="w">   </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">LEDState</span><span class="w"> </span><span class="n">halfState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">off</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">off</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">half</span><span class="p">;</span>
<span class="linenos"> 82</span>
<span class="linenos"> 83</span><span class="w">   </span><span class="k">switch</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
<span class="linenos"> 84</span><span class="w">   </span><span class="p">{</span>
<span class="linenos"> 85</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">red</span><span class="p">:</span>
<span class="linenos"> 86</span><span class="w">         </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">numOfLEDsPerColor</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos"> 87</span><span class="w">            </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">redOffset</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="linenos"> 88</span><span class="w">         </span><span class="k">break</span><span class="p">;</span>
<span class="linenos"> 89</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">green</span><span class="p">:</span>
<span class="linenos"> 90</span><span class="w">         </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">numOfLEDsPerColor</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos"> 91</span><span class="w">            </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">greenOffset</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="linenos"> 92</span><span class="w">         </span><span class="k">break</span><span class="p">;</span>
<span class="linenos"> 93</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">blue</span><span class="p">:</span>
<span class="linenos"> 94</span><span class="w">         </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">numOfLEDsPerColor</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos"> 95</span><span class="w">            </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">blueOffset</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="linenos"> 96</span><span class="w">         </span><span class="k">break</span><span class="p">;</span>
<span class="linenos"> 97</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">white</span><span class="p">:</span>
<span class="linenos"> 98</span><span class="w">         </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">numOfLEDsPerColor</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos"> 99</span><span class="w">            </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">redOffset</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="linenos">100</span><span class="w">         </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">numOfLEDsPerColor</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos">101</span><span class="w">            </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">greenOffset</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="linenos">102</span><span class="w">         </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">numOfLEDsPerColor</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos">103</span><span class="w">            </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">blueOffset</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="linenos">104</span><span class="w">         </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">105</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">magenta</span><span class="p">:</span>
<span class="linenos">106</span><span class="w">         </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">numOfLEDsPerColor</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos">107</span><span class="w">            </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">redOffset</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">halfState</span><span class="p">;</span>
<span class="linenos">108</span><span class="w">         </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">numOfLEDsPerColor</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos">109</span><span class="w">            </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">blueOffset</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="linenos">110</span><span class="w">         </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">111</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">yellow</span><span class="p">:</span>
<span class="linenos">112</span><span class="w">         </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">numOfLEDsPerColor</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos">113</span><span class="w">            </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">greenOffset</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">halfState</span><span class="p">;</span>
<span class="linenos">114</span><span class="w">         </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">numOfLEDsPerColor</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos">115</span><span class="w">            </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">redOffset</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="linenos">116</span><span class="w">         </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">117</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">cyan</span><span class="p">:</span>
<span class="linenos">118</span><span class="w">         </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">numOfLEDsPerColor</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos">119</span><span class="w">            </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">greenOffset</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">halfState</span><span class="p">;</span>
<span class="linenos">120</span><span class="w">         </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">numOfLEDsPerColor</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos">121</span><span class="w">            </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">blueOffset</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="linenos">122</span><span class="w">         </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">123</span><span class="w">      </span><span class="k">default</span><span class="o">:</span>
<span class="linenos">124</span><span class="w">         </span><span class="n">FAIL</span><span class="p">(</span><span class="s">&quot;Unknown color.&quot;</span><span class="p">);</span>
<span class="linenos">125</span><span class="w">         </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">126</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">127</span><span class="p">}</span>
<span class="linenos">128</span>
<span class="linenos">129</span><span class="kt">void</span><span class="w"> </span><span class="nf">LEDHandler::setLeftEye</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">)</span>
<span class="linenos">130</span><span class="p">{</span>
<span class="linenos">131</span><span class="w">   </span><span class="c1">//no groundContact</span>
<span class="linenos">132</span><span class="w">   </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">theGroundContactState</span><span class="p">.</span><span class="n">contact</span><span class="cm">/* &amp;&amp; (theFrameInfo.time &amp; 512)*/</span><span class="p">)</span>
<span class="linenos">133</span><span class="w">      </span><span class="n">setEyeColor</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">yellow</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">);</span>
<span class="linenos">134</span><span class="w">   </span><span class="k">else</span>
<span class="linenos">135</span><span class="w">   </span><span class="p">{</span>
<span class="linenos">136</span><span class="w">      </span><span class="kt">bool</span><span class="w"> </span><span class="n">ballSeen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">theFrameInfo</span><span class="p">.</span><span class="n">getTimeSince</span><span class="p">(</span><span class="n">theBallModel</span><span class="p">.</span><span class="n">timeWhenLastSeen</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">250</span><span class="p">;</span>
<span class="linenos">137</span><span class="w">      </span><span class="kt">bool</span><span class="w"> </span><span class="n">featureSeen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">theFrameInfo</span><span class="p">.</span><span class="n">getTimeSince</span><span class="p">(</span><span class="n">theFieldFeatureOverview</span><span class="p">.</span><span class="n">combinedStatus</span><span class="p">.</span><span class="n">lastSeen</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">250</span><span class="p">;</span>
<span class="hll"><span class="linenos">138</span><span class="w">      </span><span class="kt">bool</span><span class="w"> </span><span class="n">redPresent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">theRefereePosePercept</span><span class="p">.</span><span class="n">isThereRedColor</span><span class="p">;</span>
</span><span class="linenos">139</span>
<span class="linenos">140</span><span class="w">      </span><span class="k">if</span><span class="p">(</span><span class="n">ballSeen</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">featureSeen</span><span class="p">)</span>
<span class="linenos">141</span><span class="w">         </span><span class="n">setEyeColor</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">);</span>
<span class="linenos">142</span><span class="w">      </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">ballSeen</span><span class="p">)</span>
<span class="linenos">143</span><span class="w">         </span><span class="n">setEyeColor</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">white</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">);</span>
<span class="linenos">144</span><span class="w">      </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">featureSeen</span><span class="p">)</span>
<span class="linenos">145</span><span class="w">         </span><span class="n">setEyeColor</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">blue</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">);</span>
<span class="hll"><span class="linenos">146</span><span class="w">      </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">redPresent</span><span class="p">)</span>
</span><span class="hll"><span class="linenos">147</span><span class="w">         </span><span class="n">setEyeColor</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">green</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">);</span>
</span><span class="linenos">148</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">149</span><span class="p">}</span>
<span class="linenos">150</span>
<span class="linenos">151</span><span class="kt">void</span><span class="w"> </span><span class="nf">LEDHandler::setRightEye</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">)</span>
<span class="linenos">152</span><span class="p">{</span>
<span class="linenos">153</span><span class="w">   </span><span class="k">if</span><span class="p">(</span><span class="n">theTeamBehaviorStatus</span><span class="p">.</span><span class="n">role</span><span class="p">.</span><span class="n">playsTheBall</span><span class="p">())</span>
<span class="linenos">154</span><span class="w">      </span><span class="n">setEyeColor</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">);</span>
<span class="linenos">155</span><span class="w">   </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">theTeamBehaviorStatus</span><span class="p">.</span><span class="n">role</span><span class="p">.</span><span class="n">isGoalkeeper</span><span class="p">())</span>
<span class="linenos">156</span><span class="w">      </span><span class="n">setEyeColor</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="n">blue</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">);</span>
<span class="linenos">157</span><span class="w">   </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">theTeamBehaviorStatus</span><span class="p">.</span><span class="n">role</span><span class="p">.</span><span class="n">supporterIndex</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="linenos">158</span><span class="w">      </span><span class="n">setEyeColor</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="n">white</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">);</span>
<span class="linenos">159</span><span class="w">   </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">theTeamBehaviorStatus</span><span class="p">.</span><span class="n">role</span><span class="p">.</span><span class="n">supporterIndex</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">160</span><span class="w">      </span><span class="n">setEyeColor</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="n">yellow</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">);</span>
<span class="linenos">161</span><span class="w">   </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">theTeamBehaviorStatus</span><span class="p">.</span><span class="n">role</span><span class="p">.</span><span class="n">supporterIndex</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="linenos">162</span><span class="w">      </span><span class="n">setEyeColor</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="n">green</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">);</span>
<span class="linenos">163</span><span class="w">   </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">theTeamBehaviorStatus</span><span class="p">.</span><span class="n">role</span><span class="p">.</span><span class="n">supporterIndex</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="linenos">164</span><span class="w">      </span><span class="n">setEyeColor</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="n">cyan</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">);</span>
<span class="linenos">165</span><span class="p">}</span>
<span class="linenos">166</span>
<span class="linenos">167</span><span class="kt">void</span><span class="w"> </span><span class="nf">LEDHandler::setHead</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">)</span>
<span class="linenos">168</span><span class="p">{</span>
<span class="linenos">169</span><span class="w">   </span><span class="k">for</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">headRearLeft0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">headMiddleLeft0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos">170</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">off</span><span class="p">;</span>
<span class="linenos">171</span>
<span class="linenos">172</span><span class="w">   </span><span class="k">if</span><span class="p">(</span><span class="n">theSystemSensorData</span><span class="p">.</span><span class="n">batteryCharging</span><span class="p">)</span>
<span class="linenos">173</span><span class="w">   </span><span class="p">{</span>
<span class="linenos">174</span><span class="w">      </span><span class="k">for</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">LED</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">firstHeadLED</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">lastHeadLED</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">LED</span><span class="p">(</span><span class="kt">unsigned</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="linenos">175</span><span class="w">         </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">off</span><span class="p">;</span>
<span class="linenos">176</span>
<span class="linenos">177</span><span class="w">      </span><span class="o">++</span><span class="n">chargingLED</span><span class="w"> </span><span class="o">%=</span><span class="w"> </span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">numOfHeadLEDs</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">chargingLightSlowness</span><span class="p">);</span>
<span class="linenos">178</span><span class="w">      </span><span class="k">const</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">LED</span><span class="w"> </span><span class="n">currentLED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">headLEDCircle</span><span class="p">[</span><span class="n">chargingLED</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">chargingLightSlowness</span><span class="p">];</span>
<span class="linenos">179</span><span class="w">      </span><span class="k">const</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">LED</span><span class="w"> </span><span class="n">nextLED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">headLEDCircle</span><span class="p">[(</span><span class="n">chargingLED</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">chargingLightSlowness</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1u</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">numOfHeadLEDs</span><span class="p">];</span>
<span class="linenos">180</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">currentLED</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">181</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">nextLED</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">182</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">183</span><span class="p">}</span>
<span class="linenos">184</span>
<span class="linenos">185</span><span class="kt">void</span><span class="w"> </span><span class="nf">LEDHandler::setChestButton</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">)</span>
<span class="linenos">186</span><span class="p">{</span>
<span class="linenos">187</span><span class="w">   </span><span class="k">switch</span><span class="p">(</span><span class="n">theRobotInfo</span><span class="p">.</span><span class="n">mode</span><span class="p">)</span>
<span class="linenos">188</span><span class="w">   </span><span class="p">{</span>
<span class="linenos">189</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">RobotInfo</span><span class="o">::</span><span class="no">unstiff</span><span class="p">:</span>
<span class="linenos">190</span><span class="w">         </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">chestBlue</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">blinking</span><span class="p">;</span>
<span class="linenos">191</span><span class="w">         </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">192</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">RobotInfo</span><span class="o">::</span><span class="no">calibration</span><span class="p">:</span>
<span class="linenos">193</span><span class="w">         </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">chestRed</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">194</span><span class="w">         </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">chestBlue</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">195</span><span class="w">         </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">196</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">RobotInfo</span><span class="o">::</span><span class="no">active</span><span class="p">:</span>
<span class="linenos">197</span><span class="w">      </span><span class="k">default</span><span class="o">:</span>
<span class="linenos">198</span><span class="w">         </span><span class="k">if</span><span class="p">(</span><span class="n">theRobotInfo</span><span class="p">.</span><span class="n">penalty</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">PENALTY_NONE</span><span class="p">)</span>
<span class="linenos">199</span><span class="w">            </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">chestRed</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">200</span><span class="w">         </span><span class="k">else</span>
<span class="linenos">201</span><span class="w">            </span><span class="k">switch</span><span class="p">(</span><span class="n">theGameInfo</span><span class="p">.</span><span class="n">state</span><span class="p">)</span>
<span class="linenos">202</span><span class="w">            </span><span class="p">{</span>
<span class="linenos">203</span><span class="w">               </span><span class="k">case</span><span class="w"> </span><span class="no">STATE_READY</span><span class="p">:</span>
<span class="linenos">204</span><span class="w">                  </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">chestBlue</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">205</span><span class="w">                  </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">206</span><span class="w">               </span><span class="k">case</span><span class="w"> </span><span class="no">STATE_SET</span><span class="p">:</span>
<span class="linenos">207</span><span class="w">                  </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">chestRed</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">208</span><span class="w">                  </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">chestGreen</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">half</span><span class="p">;</span>
<span class="linenos">209</span><span class="w">                  </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">210</span><span class="w">               </span><span class="k">case</span><span class="w"> </span><span class="no">STATE_PLAYING</span><span class="p">:</span>
<span class="linenos">211</span><span class="w">                  </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">chestGreen</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">212</span><span class="w">                  </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">213</span><span class="w">            </span><span class="p">}</span>
<span class="linenos">214</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">215</span><span class="p">}</span>
<span class="linenos">216</span>
<span class="linenos">217</span><span class="kt">void</span><span class="w"> </span><span class="nf">LEDHandler::setLeftFoot</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">)</span>
<span class="linenos">218</span><span class="p">{</span>
<span class="linenos">219</span><span class="w">   </span><span class="k">switch</span><span class="p">(</span><span class="n">theOwnTeamInfo</span><span class="p">.</span><span class="n">teamColor</span><span class="p">)</span>
<span class="linenos">220</span><span class="w">   </span><span class="p">{</span>
<span class="linenos">221</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">TEAM_ORANGE</span><span class="p">:</span>
<span class="linenos">222</span><span class="w">         </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footLeftGreen</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">half</span><span class="p">;</span>
<span class="linenos">223</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">TEAM_RED</span><span class="p">:</span>
<span class="linenos">224</span><span class="w">         </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footLeftRed</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">225</span><span class="w">         </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">226</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">TEAM_WHITE</span><span class="p">:</span>
<span class="linenos">227</span><span class="w">         </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footLeftBlue</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">228</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">TEAM_YELLOW</span><span class="p">:</span>
<span class="linenos">229</span><span class="w">         </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footLeftRed</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">230</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">TEAM_GREEN</span><span class="p">:</span>
<span class="linenos">231</span><span class="w">         </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footLeftGreen</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">232</span><span class="w">         </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">233</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">TEAM_PURPLE</span><span class="p">:</span>
<span class="linenos">234</span><span class="w">         </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footLeftRed</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">235</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">TEAM_BLUE</span><span class="p">:</span>
<span class="linenos">236</span><span class="w">         </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footLeftBlue</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">237</span><span class="w">         </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">238</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">TEAM_GRAY</span><span class="p">:</span>
<span class="linenos">239</span><span class="w">         </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footLeftBlue</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">half</span><span class="p">;</span>
<span class="linenos">240</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="no">TEAM_BROWN</span><span class="p">:</span><span class="w"> </span><span class="c1">// more a darker yellow</span>
<span class="linenos">241</span><span class="w">         </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footLeftRed</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">half</span><span class="p">;</span>
<span class="linenos">242</span><span class="w">         </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footLeftGreen</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">half</span><span class="p">;</span>
<span class="linenos">243</span><span class="w">         </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">244</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">245</span><span class="p">}</span>
<span class="linenos">246</span>
<span class="linenos">247</span><span class="kt">void</span><span class="w"> </span><span class="nf">LEDHandler::setRightFoot</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">)</span>
<span class="linenos">248</span><span class="p">{</span>
<span class="linenos">249</span><span class="w">   </span><span class="k">if</span><span class="p">(</span><span class="n">theGameInfo</span><span class="p">.</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">STATE_INITIAL</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="linenos">250</span><span class="w">      </span><span class="n">theGameInfo</span><span class="p">.</span><span class="n">gamePhase</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">GAME_PHASE_PENALTYSHOOT</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="linenos">251</span><span class="w">      </span><span class="n">theGameInfo</span><span class="p">.</span><span class="n">kickingTeam</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">theOwnTeamInfo</span><span class="p">.</span><span class="n">teamNumber</span><span class="p">)</span>
<span class="linenos">252</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footRightGreen</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">253</span><span class="w">   </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">theGameInfo</span><span class="p">.</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">STATE_INITIAL</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="linenos">254</span><span class="w">           </span><span class="n">theGameInfo</span><span class="p">.</span><span class="n">gamePhase</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">GAME_PHASE_PENALTYSHOOT</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="linenos">255</span><span class="w">           </span><span class="n">theGameInfo</span><span class="p">.</span><span class="n">kickingTeam</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">theOwnTeamInfo</span><span class="p">.</span><span class="n">teamNumber</span><span class="p">)</span>
<span class="linenos">256</span><span class="w">   </span><span class="p">{</span>
<span class="linenos">257</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footRightRed</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">258</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footRightGreen</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">259</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">260</span><span class="w">   </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">theFrameInfo</span><span class="p">.</span><span class="n">getTimeSince</span><span class="p">(</span><span class="n">theGameInfo</span><span class="p">.</span><span class="n">timeLastPacketReceived</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">gameControllerTimeOut</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="linenos">261</span><span class="w">           </span><span class="n">theGameInfo</span><span class="p">.</span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">STATE_SET</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="linenos">262</span><span class="w">           </span><span class="n">theGameInfo</span><span class="p">.</span><span class="n">kickingTeam</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">theOwnTeamInfo</span><span class="p">.</span><span class="n">teamNumber</span><span class="p">)</span>
<span class="linenos">263</span><span class="w">   </span><span class="p">{</span>
<span class="linenos">264</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footRightRed</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">265</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footRightGreen</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">266</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">footRightBlue</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">267</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">268</span><span class="p">}</span>
<span class="linenos">269</span>
<span class="linenos">270</span><span class="kt">void</span><span class="w"> </span><span class="nf">LEDHandler::setBatteryLevelInEar</span><span class="p">(</span><span class="n">LEDRequest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">LED</span><span class="w"> </span><span class="n">baseLED</span><span class="p">)</span>
<span class="linenos">271</span><span class="p">{</span>
<span class="linenos">272</span><span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">onLEDs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">theSystemSensorData</span><span class="p">.</span><span class="n">batteryLevel</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1f</span><span class="p">),</span><span class="w"> </span><span class="mi">9</span><span class="p">);</span>
<span class="linenos">273</span>
<span class="linenos">274</span><span class="w">   </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">onLEDs</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<span class="linenos">275</span><span class="w">      </span><span class="n">ledRequest</span><span class="p">.</span><span class="n">ledStates</span><span class="p">[</span><span class="n">baseLED</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">;</span>
<span class="linenos">276</span><span class="p">}</span>
<span class="linenos">277</span>
<span class="linenos">278</span><span class="n">MAKE_MODULE</span><span class="p">(</span><span class="n">LEDHandler</span><span class="p">,</span><span class="w"> </span><span class="n">behaviorControl</span><span class="p">);</span>
</pre></div>
</div>
</div>
</details></section>
<section id="explications">
<h2>Explications<a class="headerlink" href="#explications" title="Lien permanent vers cette rubrique">#</a></h2>
<p>Dans cet exemple, l’objectif est de modifier la couleur des yeux afin qu’elle reflète la détection de la couleur rouge par la caméra.
Pour ce faire, nous devons adapter les modules responsables de l’affichage des LED dans les yeux lorsque la représentation de détection de rouge est activée.</p>
<p>Les étapes à suivre sont les suivantes :</p>
<ol class="arabic">
<li><p><strong>Inclusion de la représentation :</strong>
Dans le fichier <em>LEDHandler.h</em>, incluez le fichier de la représentation en ajoutant :</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Representations/Perception/ColorDetects/ColorDetect.h&quot;</span>
</pre></div>
</div>
</li>
<li><p><strong>Mise à jour des dépendances :</strong>
Ajoutez la représentation dans la liste des <em>REQUIRES</em> :</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">REQUIRES</span><span class="p">(</span><span class="n">ColorDetect</span><span class="p">),</span>
</pre></div>
</div>
</li>
<li><p><strong>Modification de la méthode concernée :</strong>
Dans le fichier <em>LEDHandler.cpp</em>, modifiez la méthode <em>setLeftEye</em> pour intégrer la nouvelle logique.
Par exemple, récupérez la valeur de la détection de rouge :</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="n">redPresent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">theRefereePosePercept</span><span class="p">.</span><span class="n">isThereRedColor</span><span class="p">;</span>
</pre></div>
</div>
<p>Ensuite, ajoutez une condition dans la séquence de choix de couleur pour activer la LED verte lorsque du rouge est détecté :</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">ballSeen</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">featureSeen</span><span class="p">)</span>
<span class="w">   </span><span class="n">setEyeColor</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">);</span>
<span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">ballSeen</span><span class="p">)</span>
<span class="w">   </span><span class="n">setEyeColor</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">white</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">);</span>
<span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">featureSeen</span><span class="p">)</span>
<span class="w">   </span><span class="n">setEyeColor</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">blue</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">);</span>
<span class="hll"><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">redPresent</span><span class="p">)</span>
</span><span class="hll"><span class="w">   </span><span class="n">setEyeColor</span><span class="p">(</span><span class="n">ledRequest</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">green</span><span class="p">,</span><span class="w"> </span><span class="n">LEDRequest</span><span class="o">::</span><span class="n">on</span><span class="p">);</span>
</span></pre></div>
</div>
</li>
</ol>
<p>Ainsi, vous adaptez le comportement du module LEDHandler pour que la couleur affichée dans l’œil gauche change en fonction de la détection de la couleur rouge par la caméra.
Vous pouvez maintenant passer aux tests avec le tutoriel suivant.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="config.html"
       title="page précédente">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">précédent</p>
        <p class="prev-next-title">Ajouter la représentation au fichier de configuration</p>
      </div>
    </a>
    <a class="right-next"
       href="test.html"
       title="page suivante">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">suivant</p>
        <p class="prev-next-title">Tester sur le robot</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contenu
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#le-code">Le code</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#explications">Explications</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
Par Les développeurs du projet : Documentation des projets de Naova
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024-2025, Les développeurs du projet : Documentation des projets de Naova.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
  Mis à jour le mars 22, 2025.
  <br/>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>